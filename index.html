const grid = document.getElementById('videoGrid');
function makeWarnCard(v, status){
const fig = document.createElement('figure');
const box = document.createElement('div');
box.style.padding = '14px';
box.style.color = '#e5e7eb';
box.innerHTML = `⚠️ No se pudo cargar <code>${v.src}</code>${status?` (HTTP ${status})`:''}. <br>Verifica el nombre, mayúsculas/minúsculas y tildes. Prueba este enlace directo: <a href="${v.src}" target="_blank">abrir archivo</a>.`;
const cap = document.createElement('figcaption');
cap.className = 'cap';
cap.textContent = v.title || v.src.split('/').pop();
fig.appendChild(box); fig.appendChild(cap); grid.appendChild(fig);
}
async function addCard(v){
try{
const res = await fetch(v.src, { method:'HEAD', cache:'no-store' });
if(!res.ok){ makeWarnCard(v, res.status); return; }
const fig = document.createElement('figure');
const video = document.createElement('video');
video.setAttribute('controls','');
video.setAttribute('preload','metadata');
video.setAttribute('playsinline',''); // evita fullscreen forzado en iOS
const src = document.createElement('source');
src.src = v.src;
src.type = 'video/mp4';
video.appendChild(src);
const cap = document.createElement('figcaption');
cap.className = 'cap';
cap.textContent = v.title || v.src.split('/').pop();
fig.appendChild(video); fig.appendChild(cap); grid.appendChild(fig);
}catch(err){ makeWarnCard(v); }
}
if (grid && Array.isArray(VIDEOS)) {
VIDEOS.forEach(addCard);
}<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pliego SINDESENA – Mapa interactivo</title>
<style>
:root{
--tap: 44px; /* tamaño mínimo recomendado de objetivo táctil */
}
html,body{margin:0;padding:0;background:#0b1215;color:#0e1111;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Inter,Arial,sans-serif}
header{padding:16px 20px;text-align:center;background:#0f172a;color:#fff;position:sticky;top:0;z-index:5}
header h1{font-size:clamp(18px,2.6vw,22px);margin:0}
main{max-width:900px;margin:0 auto;padding:18px}
figure{margin:0}
.img-wrap{position:relative;display:block;width:100%;}
/* Leyenda accesible (útil también si el usuario prefiere tocar botones) */
.legend{display:grid;grid-template-columns:1fr;gap:10px;margin-top:14px}
.legend a{display:flex;align-items:center;gap:10px;text-decoration:none;background:#111827;color:#e5e7eb;padding:12px 14px;border:1px solid #374151;border-radius:14px}
.legend a span.badge{min-width:28px;min-height:28px;border-radius:999px;display:inline-grid;place-items:center;background:#22c55e;color:#0a0a0a;font-weight:700}
.legend a:active{transform:scale(.98)}
.tip{font-size:13px;color:#a3a3a3;margin-top:8px}
/* Estilos y animación de los hotspots */
.hotspot{cursor:pointer}
.hotspot circle{fill:rgba(34,197,94,.0);stroke:#22c55e;stroke-width:2}
.hotspot:focus circle,.hotspot:hover circle{fill:rgba(34,197,94,.18)}
/* Aumentar área táctil invisiblemente para móviles */
.hotspot circle{r:18}
@media (min-width:720px){.hotspot circle{r:14}}
footer{color:#9ca3af;text-align:center;padding:32px 16px}
/* ==== Sección de videos ==== */
.videos{margin-top:26px}
.videos h2{font-size:clamp(18px,2.4vw,22px);margin:6px 0 14px}
.videos-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.videos-grid figure{margin:0;background:#0f172a;border:1px solid #1f2937;border-radius:14px;overflow:hidden}
.videos-grid .cap{padding:10px 12px;color:#e5e7eb;font-size:14px;border-top:1px solid #1f2937}
.videos-grid video{display:block;width:100%;height:auto;aspect-ratio:16/9;background:#000}
</style>
</head>
<body>
<header>
<h1>Pliego SINDESENA – Regional Valle 2025</h1>
</html>
